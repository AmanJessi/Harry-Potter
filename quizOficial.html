<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz del Sombrero Seleccionador • Harry Potter</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Harry+Potter&family=Cinzel&family=Lora:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css?v=2025">
</head>
<body>

  <div id="particles"></div>

  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <a class="navbar-brand" href="index.html">Harry Potter</a>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item"><a class="nav-link" href="casas.html">Casas</a></li>
      <li class="nav-item"><a class="nav-link" href="hechizos.html">Hechizos</a></li>
      <li class="nav-item"><a class="nav-link active" href="quizOficial.html">Quiz Oficial</a></li>
    </ul>
  </nav>

  <div class="container my-5 pt-5 text-center">
    <h2 class="title-gold display-3 mb-5">SOMBRERO SELECCIONADOR</h2>
    
    <img src="img/sombrero.png" alt="Sombrero" class="sombrero-principal mb-4" onclick="iniciarQuiz()">
    <h3 class="text-white mb-5">¡Toca el sombrero para ser seleccionado!</h3>

    <div id="quizContainer"></div>
    <div id="resultadoFinal" class="mt-5 display-4"></div>
  </div>

  <footer class="text-center py-5 position-relative overflow-hidden">
    <div class="flu-powder"></div>
    <a href="index.html" class="btn-volver-epico">
      <span class="btn-text">
        <span class="var2">Expelliarmus</span> VOLVER AL CASTILLO <span class="var2">Expelliarmus</span>
      </span>
      <span class="btn-glow"></span>
      <span class="btn-sparkles"></span>
    </a>
  </footer>

  <script>
    const preguntas = [
      { p: "¿Qué valoras más?", r: ["Valentía", "Ambición", "Inteligencia", "Lealtad"] },
      { p: "¿Animal favorito?", r: ["León", "Serpiente", "Águila", "Tejón"] },
      { p: "¿Color preferido?", r: ["Rojo y oro", "Verde y plata", "Azul y bronce", "Amarillo y negro"] },
      { p: "¿Qué harías con poder ilimitado?", r: ["Proteger a los débiles", "Dominar el mundo", "Descubrir secretos", "Ayudar a todos"] }
    ];

    let puntaje = { g:0, s:0, r:0, h:0 };
    let preguntaActual = 0;

    function iniciarQuiz() {
      document.getElementById("resultadoFinal").innerHTML = "";
      puntaje = { g:0, s:0, r:0, h:0 };
      preguntaActual = 0;
      mostrarPregunta();
    }

    function mostrarPregunta() {
      if (preguntaActual >= preguntas.length) {
        mostrarResultado();
        return;
      }

      const q = preguntas[preguntaActual];
      let html = `<div class="pregunta"><h3 class="mb-4">${q.p}</h3>`;
      q.r.forEach((res, i) => {
        const casa = i===0 ? 'g' : i===1 ? 's' : i===2 ? 'r' : 'h';
        html += `<button class="btn-respuesta mb-3" onclick="responder('${casa}')">${res}</button><br>`;
      });
      html += `</div>`;
      document.getElementById("quizContainer").innerHTML = html;
    }

    function responder(casa) {
      puntaje[casa]++;
      preguntaActual++;
      mostrarPregunta();
    }

    function mostrarResultado() {
      const max = Object.keys(puntaje).reduce((a, b) => puntaje[a] > puntaje[b] ? a : b);
      const casas = { g: "GRYFFINDOR", s: "SLYTHERIN", r: "RAVENCLAW", h: "HUFFLEPUFF" };
      const colores = { g: "#ae0001", s: "#1a472a", r: "#0e1a40", h: "#ecb939" };
      
      document.getElementById("quizContainer").innerHTML = "";
      document.getElementById("resultadoFinal").innerHTML = 
        `<div style="color:${colores[max]}; text-shadow: 0 0 40px ${colores[max]}">
          ¡${casas[max]}! ¡Felicidades!
        </div>`;
    }
  </script>
</body>
</html>